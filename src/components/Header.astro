---
import { NAVIGATION } from "@config/site";
import MobileMenu from "@components/react/MobileMenu";
import { Image } from "astro:assets";
import GarolaLogo from "@assets/garola_logo_white.webp";

const { currentPathname } = Astro.props;

const isActiveLink = (href: string) => href === currentPathname;
---

<header
  class="sticky top-0 z-50 w-full border-b border-slate-700/30 bg-[#14171A]/95 backdrop-blur-md transition-all"
>
  <nav
    class="container mx-auto flex h-20 items-center justify-between px-4 sm:px-6 lg:px-8"
  >
    <!-- Logo -->
    <a href="/" class="flex items-center">
      <Image
        src={GarolaLogo}
        alt="Garola"
        width={128}
        height={32}
        decoding="async"
      />
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden lg:flex items-center space-x-1">
      {
        NAVIGATION.map((item) => {
          const isActive = isActiveLink(item.href);
          return (
            <a
              href={item.href}
              class={`relative px-4 py-2 text-sm font-regular uppercase rounded-lg transition-all
              ${
                isActive
                  ? "text-white nav-active"
                  : "text-slate-400 hover:text-white"
              }`}
            >
              {item.name}
            </a>
          );
        })
      }

      <!-- CTA -->
      <div class="ml-4 pl-4 border-l border-slate-700/40">
        <a
          href="/rfq"
          class="inline-flex items-center px-6 py-2.5 text-sm font-semibold uppercase text-white
                 bg-[#DC2828] hover:bg-[#DC2828]/90 shadow-md transition-all"
        >
          Cotizar
        </a>
      </div>
    </div>

    <!-- Mobile -->
    <MobileMenu client:idle />
  </nav>
</header>

<script>
  const header = document.querySelector("header");
  window.addEventListener("scroll", () => {
    header?.classList.toggle("scrolled", window.scrollY > 10);
  });
</script>
